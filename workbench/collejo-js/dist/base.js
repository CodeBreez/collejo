var Collejo=Collejo||{};Collejo.ajaxComplete=function(a,e,t){var o,l,n,i=0;try{i=$.parseJSON(e.responseText)}catch(d){console.log(d)}if(l=0==i?e.status:i,403!=l&&401!=l||this.alert("danger","You are not authorized to perform this action",1e3),0!=l&&null!=l){var o=void 0!=l.code?l.code:0;if(0==o&&(void 0!=i.data&&void 0!=i.data.redir&&(null!=i.message&&(this.alert(i.success?"success":"warning",i.message+". redirecting&hellip;",1e3),n=0),setTimeout(function(){window.location=i.data.redir},n)),void 0!=i.message&&null!=i.message&&i.message.length>0&&void 0==i.data.redir&&this.alert(i.success?"success":"warning",i.message,3e3),void 0!=i.data&&void 0!=i.data.errors)){var r="<strong>Validation failed</strong> Please correct them and try again <br/>";$.each(i.data.errors,function(a,e){$.each(e,function(a,e){r=r+e+"<br/>"})}),this.alert("warning",r,5e3)}}$(window).resize()},$(function(){Collejo.templates.spinnerTemplate=function(){return $('<span class="spinner-wrap"><span class="spinner"></span></span>')},Collejo.templates.alertTemplate=function(a,e,t){return $('<div class="alert alert-'+a+" "+(t!==!1?"alert-dismissible":"")+'" role="alert">'+(t!==!1?'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>':"")+e+"</div>")},Collejo.templates.alertWrap=function(){return $('<div id="alert-wrap"></div>')},Collejo.templates.alertContainer=function(){return $('<div class="alert-container"></div>')},Collejo.templates.ajaxLoader=function(){return null},Collejo.alert=function(a,e,t){var o=this.ui.templates.alertWrap,l=this.ui.templates.alertContainer;o.css({position:"fixed",top:0,width:"100%",height:0}),l.css({width:"400px",margin:"0 auto"}),o.append(l);var n=this.ui.alertTemplate(a,e,t);0==$("#alert-wrap").length&&$("body").append(o);var l=$("#alert-wrap").find(".alert-container");t===!1&&l.empty(),l.append(n),t>0&&window.setTimeout(function(){n.fadeOut(function(){n.remove()})},t)},Collejo.form.lock=function(a){$(a).find('button[type="submit"]').attr("disabled",!0).append(this.ui.spinnerTemplate())},Collejo.form.unlock=function(a){$(a).find('button[type="submit"]').attr("disabled",!1).find(".spinner-wrap").remove()},Collejo.link.ajax=function(a){a.attr("disabled",!0).append(collejo.spinnertpl()),$.getJSON(a.attr("href"),function(e){e.success&&(a.data("target")?$("#"+a.data("target")).empty().append(e.data.html):a.replaceWith(e.data.html))})},Collejo.modal.open=function(a){var e=null!=a.data("modal-id")?a.data("modal-id"):"ajax-modal"+moment(),t=null!=a.data("modal-size")?" modal-"+a.data("modal-size")+" ":"",o=null!=a.data("modal-backdrop")?a.data("modal-backdrop"):!0,l=null!=a.data("modal-keyboard")?a.data("modal-keyboard"):!0,n=$('<div id="'+e+'" class="modal fade loading" role="dialog" aria-labelledby="'+e+'" aria-hidden="true"><div class="modal-dialog'+t+'"></div></div>'),i=this.templates.ajaxLoader;null!=i&&i.appendTo(n),$("body").append(n),n.on("show.bs.modal",function(){$.ajax({url:a.attr("href"),type:"get",success:function(a){void 0==a.success&&(n.find(".modal-dialog").html(a),n.removeClass("loading"),null!=i&&i.remove())}})}).on("hidden.bs.modal",function(){$(this).remove()}).modal({backdrop:o,keyboard:l})},Collejo.modal.close=function(a){$("body").find(a).closest(".modal").modal("hide").remove()},$(document).ajaxComplete(Collejo.core.ajaxComplete),$(document).on("click",'[data-toggle="ajax-link"]',function(a){a.preventDefault(),Collejo.link.ajax($(this))}),$(document).on("click",'[data-toggle="ajax-modal"]',function(a){a.preventDefault(),Collejo.modal.open($(this))})}),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="token"]').attr("content")}});